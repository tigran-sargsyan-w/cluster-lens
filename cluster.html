<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>42 Cluster Lens â€” Map</title>
  <style>
    :root{
      --bg:#0b0f17; --card:#121a26; --muted:#9aa4b2; --text:#e7edf5;
      --line:#243044; --good:#2ecc71; --bad:#ff5c5c; --warn:#f5c542;
      --chip:#1b2637;
    }
    body{ margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial; background:var(--bg); color:var(--text); }
    .wrap{ max-width:1100px; margin:0 auto; padding:22px; }
    .topbar{ display:flex; gap:12px; align-items:center; justify-content:space-between; margin-bottom:16px; }
    .title{ font-size:18px; color:var(--muted); }
    .btn{
      background:transparent; border:1px solid var(--line); color:var(--text);
      padding:10px 12px; border-radius:12px; cursor:pointer;
    }
    .btn:hover{ border-color:#3a4b6b; }
    .btn:disabled{ opacity:.45; cursor:not-allowed; }

    .grid{ display:grid; gap:14px; grid-template-columns: 360px 1fr; }
    @media (max-width: 980px){ .grid{ grid-template-columns: 1fr; } }

    .card{
      background:var(--card); border:1px solid var(--line);
      border-radius:16px; padding:16px;
      box-shadow: 0 6px 18px rgba(0,0,0,.25);
    }

    .chip{
      display:inline-flex; gap:8px; align-items:center;
      background:var(--chip); border:1px solid var(--line);
      padding:8px 10px; border-radius:999px; color:var(--text);
      font-size:13px;
    }
    .row{ display:flex; flex-wrap:wrap; gap:8px; margin-top:10px; }
    .muted{ color:var(--muted); }
    .mono{ font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace; }

    /* Tabs */
    .tabs{ display:flex; gap:10px; margin-bottom:12px; }
    .tab{
      padding:10px 12px; border-radius:12px; border:1px solid var(--line);
      cursor:pointer; color:var(--muted); background:transparent;
    }
    .tab.active{ color:var(--text); border-color:#3a4b6b; background:rgba(255,255,255,.04); }

    /* Map */
    .mapWrap{ display:grid; grid-template-columns: 1fr 1fr; gap:18px; }

    /* Mobile responsive styles */
    @media (max-width: 768px){
      .wrap{ padding: 8px; }
      
      .grid{ 
        grid-template-columns: 1fr; 
        gap:12px;
      }
      
      /* Stats card - full width */
      .card{
        width: 100%;
        box-sizing: border-box;
        padding: 16px;
        border-radius: 14px;
        overflow: hidden;
      }
      
      /* Map wrapper - keep desktop sizes, will be scaled by JS */
      .mapWrap{
        grid-template-columns: 1fr 1fr;
        gap: 18px;
      }
      
      /* Stats adjustments */
      .statValue{
        font-size: 36px;
      }
      
      .statBig{
        flex-direction: row;
        justify-content: space-between;
      }
      
      .chip{
        font-size: 12px;
        padding: 6px 8px;
      }
      
      .barRow{
        grid-template-columns: 50px 1fr auto;
        font-size: 13px;
      }
      
      /* Tabs */
      .tabs{
        gap: 8px;
        flex-wrap: wrap;
      }
      
      .tab{
        padding: 8px 10px;
        font-size: 14px;
      }
      
      /* Top bar */
      .topbar{
        flex-wrap: wrap;
        gap: 10px;
      }
      
      .title{
        font-size: 16px;
      }
      
      .btn{
        padding: 8px 10px;
        font-size: 14px;
      }
      
      /* Tooltip hidden on mobile - hard to tap */
      .tooltip{
        display: none;
      }
    }
    
    /* Extra small screens */
    @media (max-width: 480px){
      .wrap{ padding: 4px; }
      
      .card{
        padding: 8px;
        border-radius: 10px;
      }
      
      .statValue{
        font-size: 28px;
      }
    }

    .zoneTitle{ font-size:42px; font-weight:750; text-align:center; opacity:.92; margin:10px 0 12px; }
    .zone{ padding:10px; }
    .zoneInner{ display:grid; gap:12px; }
    .zoneRow{
      display:grid;
      grid-template-columns: 1fr auto;
      align-items:center;
      gap:14px;
      padding-top: 15px;
      padding-bottom:15px;
      border-bottom:1px solid var(--line);
    }
    .zoneRow:last-child{
      padding-bottom:0;
      border-bottom:none;
    }
    .rowLabel{ font-size:28px; font-weight:700; opacity:.92; }

    .seats{ display:flex; gap:8px; align-items:flex-end; }
    .seatCol{ display:flex; flex-direction:column; align-items:center; gap:6px; }
    .seatCol.up{ transform: translateY(-14px); }
    .seatCol.down{ transform: translateY(10px); }

    .seat{
      width:44px; height:44px; border-radius:10px;
      border:1px solid var(--line);
      background: rgba(255,255,255,.06);
      position:relative;
      overflow:hidden;
    }
    .seat.free{ background: rgba(255,255,255,.03); }
    .seat.occupied{ background: rgba(255,255,255,.10); }
    .seat.blocked{ background: rgba(255,92,92,.08); border-color: rgba(255,92,92,.35); }

    .seat img{
      width:100%; height:100%; object-fit:cover;
      transform: scale(1.02);
      filter: saturate(1.05);
    }
    .seat .ban{
      position:absolute; inset:0;
      display:flex; align-items:center; justify-content:center;
      font-size:18px;
    }
    .seatNum{ font-size:14px; color:var(--muted); }

    .tooltip{
      position:absolute; left:50%; bottom:52px; transform:translateX(-50%);
      background:#0b0f17; border:1px solid var(--line);
      padding:8px 10px; border-radius:12px; white-space:nowrap;
      font-size:12px; color:var(--text);
      box-shadow: 0 10px 24px rgba(0,0,0,.35);
      opacity:0; pointer-events:none;
      transition:opacity .12s ease;
    }
    .seat:hover .tooltip{ opacity:1; }

    .statBig{ display:flex; justify-content:space-between; align-items:flex-end; gap:12px; }
    .statValue{ font-size:48px; font-weight:800; line-height:1; }
    .statLabel{ color:var(--muted); margin-bottom:8px; }
    .barList{ display:grid; gap:10px; margin-top:12px; }
    .barRow{ display:grid; grid-template-columns: 62px 1fr auto; gap:10px; align-items:center; }
    .bar{ height:10px; border-radius:999px; border:1px solid var(--line); background:rgba(255,255,255,.03); overflow:hidden; }
    .bar > i{ display:block; height:100%; width:0%; background:rgba(46,204,113,.35); }

    .msg{
      margin-top:12px;
      padding:12px 14px;
      border:1px solid var(--line);
      border-radius:14px;
      background:rgba(255,255,255,.02);
      color:var(--muted);
      font-size:13px;
      line-height:1.5;
    }

    .modalOverlay{
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,.55);
  display: none;
  align-items: center;
  justify-content: center;
  padding: 24px;
  z-index: 9999;
}
.modalOverlay.show{ display:flex; }

.modal{
  width: min(500px, 100%);
  aspect-ratio: 1 / 1;
  margin-top: 18px;
  background: var(--card);
  border: 1px solid var(--line);
  border-radius: 18px;
  box-shadow: 0 18px 50px rgba(0,0,0,.5);
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

.modalHeader{
  display:flex;
  align-items:center;
  justify-content: space-between;
  padding: 14px 16px;
  background: rgba(255,255,255,.02);
  border-bottom: 1px solid var(--line);
}

.modalTitle{
  color: var(--muted);
  font-size: 13px;
}

.modalClose{
  background: transparent;
  border: 1px solid var(--line);
  color: var(--text);
  border-radius: 12px;
  padding: 8px 10px;
  cursor: pointer;
}
.modalClose:hover{ border-color:#3a4b6b; }

.modalBody{
  display:flex;
  gap: 16px;
  padding: 16px;
  align-items: center;
  justify-content: center;
  flex: 1;
  text-align: center;
  flex-direction: column;
}

.modalAvatar{
  width: 196px;
  height: 196px;
  border-radius: 18px;
  border: 1px solid var(--line);
  overflow:hidden;
  background: rgba(255,255,255,.04);
  flex: 0 0 auto;
}
.modalAvatar img{
  width:100%;
  height:100%;
  object-fit: cover;
}

.modalInfo h2{
  margin: 0 0 6px;
  font-size: 22px;
}
.modalInfo .sub{
  color: var(--muted);
  font-size: 13px;
  margin-bottom: 10px;
}

.modalActions{
  display:flex;
  gap:10px;
  justify-content:center;
  margin-bottom: 12px;
}

.modalLink{
  text-decoration: none;
  font-size: 13px;
  padding: 8px 12px;
  border-radius: 999px;
  background: var(--chip);
  border: 1px solid var(--line);
  color: var(--text);
  display:inline-flex;
  align-items:center;
  gap:8px;
}
.modalLink:hover{ border-color:#3a4b6b; }
.modalLink[aria-disabled="true"]{
  opacity:.5;
  pointer-events:none;
}

.pill{
  display:inline-flex;
  gap:8px;
  align-items:center;
  padding: 8px 10px;
  border-radius: 999px;
  background: var(--chip);
  border: 1px solid var(--line);
  font-size: 13px;
  color: var(--text);
}

/* Mobile modal styles */
@media (max-width: 768px){
  .modalOverlay{
    padding: 12px;
  }
  
  .modal{
    width: 100%;
    max-width: 100%;
    aspect-ratio: auto;
    max-height: 90vh;
    margin-top: 0;
    border-radius: 14px;
  }
  
  .modalHeader{
    padding: 12px 14px;
  }
  
  .modalBody{
    padding: 14px;
    gap: 12px;
    overflow-y: auto;
  }
  
  .modalAvatar{
    width: 140px;
    height: 140px;
    border-radius: 14px;
  }
  
  .modalInfo h2{
    font-size: 18px;
  }
  
  .modalInfo .sub{
    font-size: 12px;
  }
  
  .modalActions{
    flex-wrap: wrap;
  }
  
  .modalLink{
    font-size: 12px;
    padding: 6px 10px;
  }
  
  .pill{
    font-size: 12px;
    padding: 6px 8px;
  }
  
  .modalInfo > div:last-child{
    justify-content: center;
  }
}

@media (max-width: 480px){
  .modalAvatar{
    width: 110px;
    height: 110px;
  }
  
  .modalInfo h2{
    font-size: 16px;
  }
  
  .pill{
    font-size: 11px;
    padding: 5px 7px;
  }
}


  </style>
</head>
<body>
  <div class="wrap">
    <div class="topbar">
      <div class="title">42 Cluster Lens (POC)</div>
      <div style="display:flex; gap:10px;">
        <button class="btn" id="btn-home">Home</button>
        <button class="btn" id="btn-profile">Profile</button>
        <button class="btn" id="btn-login">Login</button>
        <button class="btn" id="btn-logout">Logout</button>
      </div>
    </div>

    <div class="grid">
      <!-- LEFT: stats -->
      <div class="card" id="stats">
      <div class="statistics">
        <div class="chip">ğŸ“Š Stats</div>
        <div style="height:12px;"></div>

        <div class="statBig">
          <div>
            <div class="statLabel">Occupied</div>
            <div class="statValue" id="occ">â€”</div>
          </div>
          <div style="text-align:right;">
            <div class="statLabel">Free</div>
            <div class="statValue" id="free">â€”</div>
          </div>
        </div>

        <div class="row">
          <span class="chip">ğŸš« blocked: <span class="mono" id="blocked">â€”</span></span>
          <span class="chip">ğŸ•’ updated: <span class="mono" id="updated">â€”</span></span>
        </div>

        <div class="row">
          <span class="chip">ğŸ« campus_id: <span class="mono" id="campusId">â€”</span></span>
          <span class="chip">ğŸ« campus: <span class="mono" id="campusName">â€”</span></span>
        </div>

        <div class="row">
            <span class="chip">ğŸ§± zones: <span class="mono" id="zonesDbg">â€”</span></span>
            <span class="chip">ğŸ§© rows: <span class="mono" id="rowsDbg">â€”</span></span>
        </div>

        <div style="height:14px;"></div>
        <div class="chip">ğŸ“ Promo</div>
        <div class="barList" id="promoBars"></div>

        <div style="height:14px;"></div>
        <div class="chip">ğŸ–ï¸ Kind</div>
        <div class="barList" id="kindBars"></div>

        <div class="row" style="margin-top:14px;">
          <button class="btn" id="btn-refresh">Refresh</button>
        </div>

        <div class="msg" id="statusMsg" style="display:none;"></div>
      </div>
      </div>

      <!-- RIGHT: map -->
      <div class="card">
        <div class="tabs">
          <button class="tab active" id="tab-io">Io</button>
          <button class="tab" id="tab-disc">Discovery</button>
        </div>

        <!-- Ğ´Ğ¸Ğ½Ğ°Ğ¼Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ğ·Ğ¾Ğ½Ñ‹ -->
        <div class="mapWrap" id="mapZones"></div>
      </div>
    </div>
  </div>

<div class="modalOverlay" id="userModalOverlay" aria-hidden="true">
  <div class="modal" role="dialog" aria-modal="true">
    <div class="modalHeader">
      <div class="modalTitle">Student</div>
      <button class="modalClose" id="userModalClose">Close</button>
    </div>

    <div class="modalBody">
      <div class="modalAvatar">
        <img id="userModalAvatar" alt="" referrerpolicy="no-referrer" />
      </div>

      <div class="modalInfo">
        <h2 id="userModalName">â€”</h2>
        <div class="sub" id="userModalLogin">â€”</div>
        <div class="modalActions">
          <a class="modalLink" id="userModalProfileLink" href="#" target="_blank" rel="noreferrer noopener" aria-disabled="true">
            ğŸ”— Open Intra profile
          </a>
        </div>

        <div style="display:flex; gap:10px; flex-wrap:wrap;">
          <span class="pill">â­ level: <span class="mono" id="userModalLevel">â€”</span></span>
          <span class="pill">ğŸ“ promo: <span class="mono" id="userModalPromo">â€”</span></span>
          <span class="pill">ğŸ–ï¸ grade: <span class="mono" id="userModalKind">â€”</span></span>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="modalOverlay" id="sessionModalOverlay" aria-hidden="true">
  <div class="modal" role="dialog" aria-modal="true">
    <div class="modalHeader">
      <div class="modalTitle">No session</div>
      <button class="modalClose" id="sessionModalClose">Close</button>
    </div>

    <div class="modalBody">
      <div style="font-size:18px; color:var(--muted);">No session found. Please login.</div>

      <div class="modalActions">
        <a class="modalLink" id="sessionModalLogin" href="#">Login</a>
      </div>
    </div>
  </div>
</div>


  <script src="js/cluster.js" defer></script>
</body>
</html>
